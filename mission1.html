<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mission 1 â€“ The Email Trap</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main>
    <h1>ğŸ“§ Mission 1 â€“ The Email Trap</h1>
    <p>One of these emails is a phishing attempt. Can you identify the correct one?</p>

    <!-- Email A -->
    <section>
      <h2>Email A</h2>
      <p><strong>From:</strong> support@roblox.com<br>
      <strong>Subject:</strong> Your Roblox password was successfully changed</p>
      <p>We wanted to let you know that your Roblox password was changed successfully.
         If this wasn't you, contact us at
         <a href="https://www.roblox.com/support">roblox.com/support</a>.
      </p>
    </section>

    <!-- Email B -->
    <section>
      <h2>Email B</h2>
      <p><strong>From:</strong> roblox-security@info-center.app<br>
      <strong>Subject:</strong> ğŸš¨Urgent: Your Roblox account is under investigation</p>
      <p>We have detected suspicious activity on your Roblox account.
         <a href="#">Click here</a> to secure your account or it will be suspended in 24 hours.
      </p>
    </section>

    <!-- Email C -->
    <section>
      <h2>Email C</h2>
      <p><strong>From:</strong> rewards@mail.roblox.com<br>
      <strong>Subject:</strong> ğŸ Youâ€™ve earned a bonus reward from Roblox Premium</p>
      <p>As a Premium member, youâ€™ve earned a special bonus item.
         <a href="https://www.roblox.com/promo/reward?id=9082">View your reward</a>.
      </p>
    </section>

    <!-- Quiz -->
    <form id="quizForm">
      <p><strong>Which email is phishing?</strong>
         <em>(+1 point only if youâ€™re correct on your first try!)</em>
      </p>
      <label><input type="radio" name="email" value="A"> Email A</label><br>
      <label><input type="radio" name="email" value="B"> Email B</label><br>
      <label><input type="radio" name="email" value="C"> Email C</label><br>
      <button type="submit">Submit</button>
    </form>

    <p id="result"></p>
  </main>

  <script>
    /* ----------------- Anti-cheat back blocker ----------------- */
    history.pushState(null, '', location.href);
    window.addEventListener('popstate', () => history.go(1));

    /* ----------------- Score helpers --------------------------- */
    function addPoint () {
      const current = Number(localStorage.getItem('spectraScore') || 0);
      localStorage.setItem('spectraScore', current + 1);
    }
    function getScore () {
      return Number(localStorage.getItem('spectraScore') || 0);
    }

    /* ----------------- Obfuscated correct answer --------------- */
    /* 66 (â€œBâ€) XOR 23 = 85    85 Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÏ„Î±Î¹ Ï‰Ï‚ masked          */
    const masked = 85;
    const correctAnswer = String.fromCharCode(masked ^ 23); // returns "B"

    /* ÎœÎµÏ„ÏÎ·Ï„Î®Ï‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ Ï€ÏÏÏ„Î· Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î± */
    let firstTry = true;

    /* ----------------- Quiz logic ------------------------------ */
    document.getElementById('quizForm').addEventListener('submit', e => {
      e.preventDefault();

      const choice  = document.querySelector('input[name="email"]:checked');
      const result  = document.getElementById('result');
      const button  = e.target.querySelector('button');

      if (!choice) {
        result.textContent = 'Please select an option.';
        return;
      }

      if (choice.value === correctAnswer) {
        /* â–ºâ–º Î”Î¯Î½Î¿Ï…Î¼Îµ Ï€ÏŒÎ½Ï„Î¿ **Î¼ÏŒÎ½Î¿** ÏƒÏ„Î·Î½ Ï€ÏÏÏ„Î· ÏƒÏ‰ÏƒÏ„Î® Ï€ÏÎ¿ÏƒÏ€Î¬Î¸ÎµÎ¹Î± */
        if (firstTry) addPoint();

        const earnedMsg = firstTry ? '+1 point' : 'no points';
        result.innerHTML =
          `âœ… Correct (${earnedMsg}). Current score: ${getScore()}` +
          `<br><a href="mission2.html">Continue to Mission 2</a>`;

        /* ÎšÎ»ÎµÎ¹Î´ÏÎ½Î¿Ï…Î¼Îµ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ & ÎºÎ¿Ï…Î¼Ï€Î¯ */
        document.querySelectorAll('input[name="email"]').forEach(el => el.disabled = true);
        button.disabled = true;
      } else {
        /* Î›Î¬Î¸Î¿Ï‚ â€“ Î´Î¯Î½Î¿Ï…Î¼Îµ Î¬Î»Î»Î· ÎµÏ…ÎºÎ±Î¹ÏÎ¯Î± Ï‡Ï‰ÏÎ¯Ï‚ Ï€ÏŒÎ½Ï„Î¿ */
        firstTry = false;
        result.textContent =
          'âŒ Not quite. Look at the sender and the link, then try again.';
      }
    });
  </script>
</body>
</html>
